<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Income Tax Calculator (IRS Accurate)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{font-family:Arial,Helvetica,sans-serif;background:#f2f2f2;margin:0}
.container{max-width:900px;margin:20px auto;background:#fff;border:1px solid #ccc;padding:15px}
h1{color:#1f4e79;margin:0}
.note{background:#eef3f8;border:1px solid #b7c9d9;padding:8px;margin:10px 0;font-size:13px}
.section{border:1px solid #b7c9d9;margin:12px 0}
.section h2{margin:0;background:#3b6ea5;color:#fff;padding:6px 10px;font-size:15px}
.row{display:grid;grid-template-columns:60% 40%;padding:6px 10px;border-top:1px solid #ddd;align-items:center}
.row label{font-size:13px}
input,select{width:100%;padding:4px;border:1px solid #999}
.actions{text-align:center;margin-top:15px}
button{padding:8px 16px;margin:5px;cursor:pointer}
strong{font-size:14px}
@media(max-width:600px){.row{grid-template-columns:1fr}}
</style>
</head>

<body>
<div class="container">

<h1>Income Tax Calculator</h1>
<div class="note">Estimates only. Not tax advice.</div>

<!-- FILING -->
<div class="section">
<h2>Filing Info</h2>
<div class="row"><label>Filing Status</label>
<select id="status">
<option value="single">Single</option>
<option value="married">Married Filing Jointly</option>
<option value="separate">Married Filing Separately</option>
<option value="head">Head of Household</option>
</select>
</div>
<div class="row"><label>Tax Year</label>
<select id="year">
<option value="2025">2025</option>
<option value="2026">2026</option>
</select>
</div>
</div>

<!-- INCOME -->
<div class="section">
<h2>Income</h2>
<div class="row"><label>Wages (W-2)</label><input id="wages" value="80000"></div>
<div class="row"><label>Federal Tax Withheld</label><input id="withheld" value="9000"></div>
<div class="row"><label>Self-Employment Income (1099)</label><input id="seIncome" value="0"></div>
<div class="row"><label>Short-Term Capital Gains</label><input id="stcg" value="0"></div>
<div class="row"><label>Long-Term Capital Gains</label><input id="ltcg" value="0"></div>
</div>

<!-- DEPENDENTS -->
<div class="section">
<h2>Dependents</h2>
<div class="row"><label>Children (0-16)</label><input id="childDep" value="0"></div>
<div class="row"><label>Other Dependents (17+)</label><input id="otherDep" value="0"></div>
</div>

<!-- STATE -->
<div class="section">
<h2>State</h2>
<div class="row">
<label>State</label>
<select id="state">
<option value="">No State Tax</option>
<option value="CA">California</option>
<option value="NY">New York</option>
<option value="TX">Texas</option>
</select>
</div>
</div>

<!-- ACTIONS -->
<div class="actions">
<button onclick="calculate()">Calculate</button>
<button onclick="downloadPDF()">Download PDF</button>
</div>

<!-- RESULTS -->
<div class="section" id="results" style="display:none">
<h2>Results</h2>
<div class="row"><label>Federal Tax</label><strong id="federalTax"></strong></div>
<div class="row"><label>State Tax</label><strong id="stateTax"></strong></div>
<div class="row"><label>Self-Employment Tax</label><strong id="seTax"></strong></div>
<div class="row"><label>Total Tax</label><strong id="totalTax"></strong></div>
<div class="row"><label>Refund / Owed</label><strong id="refund"></strong></div>
</div>

<!-- 1040 ES -->
<div class="section" id="es" style="display:none">
<h2>1040-ES Quarterly Payments</h2>
<div class="row"><label>Q1 (Apr 15)</label><strong id="q1"></strong></div>
<div class="row"><label>Q2 (Jun 15)</label><strong id="q2"></strong></div>
<div class="row"><label>Q3 (Sep 15)</label><strong id="q3"></strong></div>
<div class="row"><label>Q4 (Jan 15)</label><strong id="q4"></strong></div>
</div>

<canvas id="pie"></canvas>

</div>

<script>
function roundIRS(v){return Math.round(v)}
function usd(v){return "$"+roundIRS(v).toLocaleString()}

const stdDeduction={
2025:{single:14600,married:29200,separate:14600,head:21900},
2026:{single:15000,married:30000,separate:15000,head:22500}
};

const fedBrackets={
single:[[0,11600,.1],[11600,47150,.12],[47150,100525,.22],[100525,Infinity,.24]],
married:[[0,23200,.1],[23200,94300,.12],[94300,201050,.22],[201050,Infinity,.24]],
separate:[[0,11600,.1],[11600,47150,.12],[47150,100525,.22],[100525,Infinity,.24]],
head:[[0,16550,.1],[16550,63100,.12],[63100,100500,.22],[100500,Infinity,.24]]
};

const stateBrackets={
CA:[[0,10099,.01],[10099,23942,.02],[23942,37788,.04],[37788,52455,.06],[52455,Infinity,.08]],
NY:[[0,8500,.04],[8500,11700,.045],[11700,Infinity,.0525]],
TX:[]
};

function progTax(income,br){
let t=0;
for(let [m,x,r] of br){if(income>m)t+=(Math.min(income,x)-m)*r}
return t;
}

function calculate(){
let wages=+wagesEl.value||0;
let withheld=+withheldEl.value||0;
let seIncome=+seIncomeEl.value||0;
let stcg=+stcgEl.value||0;
let ltcg=+ltcgEl.value||0;

let status=statusEl.value;
let year=yearEl.value;

let seTax=seIncome>0?(seIncome*0.9235*0.153):0;
let seDed=seTax/2;

let income=wages+stcg+seIncome;
let taxable=Math.max(0,income-seDed-stdDeduction[year][status]);

let fed=progTax(taxable,fedBrackets[status]);
let credit=(+childDep.value||0)*2000+(+otherDep.value||0)*500;
fed=Math.max(0,fed-credit);

let state=stateBrackets[stateEl.value];
let stTax=state?progTax(taxable,state):0;

let total=fed+stTax+seTax;
let refund=withheld-total;

results.style.display="block";
es.style.display="block";

federalTax.textContent=usd(fed);
stateTax.textContent=usd(stTax);
seTaxEl.textContent=usd(seTax);
totalTax.textContent=usd(total);
refundEl.textContent=refund>=0?"Refund "+usd(refund):"Owed "+usd(-refund);

let q=(Math.max(0,total-withheld))/4;
q1.textContent=q2.textContent=q3.textContent=q4.textContent=usd(q);
}
const wagesEl=wages,withheldEl=withheld,seIncomeEl=seIncome,stcgEl=stcg,ltcgEl=ltcg;
const statusEl=status,yearEl=year,stateEl=state,childDepEl=childDep,otherDepEl=otherDep;
const federalTaxEl=federalTax,stateTaxEl=stateTax,seTaxEl=document.getElementById("seTax"),totalTaxEl=totalTax,refundEl=refund;

function downloadPDF(){
const {jsPDF}=window.jspdf;
let p=new jsPDF();
p.text("Income Tax Summary",20,20);
p.text("Total Tax: "+totalTaxEl.textContent,20,40);
p.text("Result: "+refundEl.textContent,20,50);
p.save("tax-summary.pdf");
}
</script>

</body>
</html>
